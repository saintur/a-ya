# Dynamic Touch Expand

iOS гар анх гарахдаа хэрхэн дараагийн товчны товших талбайг өргөсгөж алдаж дарах боломжийг багасгадаг талаар медиум [нийтлэл](https://medium.com/@saintur/ios-mongolian-keyboard-the-first-soft-keyboard-6-1a8840069366) дээрээ товчхон хуваалцсан. Энэ нийтлэлээрээ хэрхэн хэрэгжүүлж болох талаар хуваалцъя гэж бодлоо. Мөн өмнөх [нийтлэлд](https://medium.com/@saintur/ios-keyboard-development-2-c65e25fdf670) Swift UIButton зөвхөн өөр дээрээ дарах үйлдлийг хүлээж авдаг бөгөөд, ойролцоо дарахад товч идэвхэждэггүй тул хоосон талбай дээр дарахад товчийг дарах үйлдлийг програмчилсан талаараа бичсэн. 

Өнөөдрийн гол сэдэв болох талбайг өргөсгөхийн тулд хоёр зүйлийг шийдэх хэрэгтэй

- Дараагийн үсгийг тодорхойлогч функц
- Дараагийн үсгүүдийн нэр дэвшигчдийг чагнах функц

Уг хоёр функцийг шийдчихвэл товчнуудын дарагдах талбайг тэлэх, хумих амархан шийдэгдэнэ. Миний шийдэл дээр товч бүрийн хөршүүдийг санах ойд хадгалах бөгөөд, нэр дэвшигч үсгүүд өөрчлөгдөх бүрт тулгалтыг хийж, товч өөрийн хүрээг тэлж, хөрш өөрийн хүрээх хумих байдлаар шийдсэн.

```swift
publisher.$candidates
  .sink { candidates in
    if candidates.contains(key.main) {
      self.layoutMargins = expandedEdge
    }
    if candidates.contains(key.right ?? "#") {
      self.layoutMargins = expandedLEdge
    }
    if candidates.contains(key.left ?? "#") {
      self.layoutMargins = expandedREdge
    }
  }
```

Жишээ болгож товчнуудын хүрээг будан дүрслэв. Монгол үгсийн санд `К` үсгээр эхлэх 107 үг байх бөгөөд, `К` үсгийн араас `О`, `А`, `И` орох магадлал `0.5`, `0.4`, `0.1` тус тус байх ажээ. Иймд `О`, `А`, `И` үсгүүдийн талбайг тэлж, хөрш үсгүүдийн талбайгаас зээлэв. 

![image](https://github.com/user-attachments/assets/5aa6155c-5ddd-476f-997e-d6669a94d2de)
Анхны төлөв, бүгд жигд хүрээтэй.

![image](https://github.com/user-attachments/assets/9f94c808-4ab5-425c-aea9-a7c7fef34f87)
К үсэг шивэгдсний дараа, `О`, `А`, `И` үсгүүдийн талбай тэлсэн байдал.

Хэдий маш нарийн хэмжээгээр тэлж байгаа боловч, дэлгэцэнд хүрэх талбайг хоёр хөрштэйг 18% -р, нэг хөрштэйг 9% -р нэмэгдүүлж байгаа. 
